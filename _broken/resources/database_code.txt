drop table "KORV".CUSTOMER;
drop table "KORV".APPOINTMENT;
drop table "KORV".REPAIR;
drop table "KORV".LEAVE;
drop table "KORV".TIME_RESERVATION;


create table "KORV".TIME_RESERVATION
(
	TIME_RESERVATION_ID INTEGER not null primary key
		GENERATED ALWAYS AS IDENTITY
		(START WITH 1, INCREMENT BY 1),
	START_TIME TIME,
	STOP_TIME TIME,
	RESERVATION_DATE DATE
);

create table "KORV".LEAVE
(
	LEAVE_ID INTEGER not null primary key
		GENERATED ALWAYS AS IDENTITY
		(START WITH 1, INCREMENT BY 1),
	TIME_RESERVATION_ID_FK INTEGER references TIME_RESERVATION(TIME_RESERVATION_ID) ON DELETE CASCADE
);

create table "KORV".REPAIR
(
	REPAIR_ID INTEGER not null primary key
		GENERATED ALWAYS AS IDENTITY
		(START WITH 1, INCREMENT BY 1),
	INFO VARCHAR(256),
	TIME_RESERVATION_ID_FK INTEGER references TIME_RESERVATION(TIME_RESERVATION_ID) ON DELETE CASCADE
);

create table "KORV".APPOINTMENT
(
	APPOINTMENT_ID INTEGER not null primary key
		GENERATED ALWAYS AS IDENTITY
		(START WITH 1, INCREMENT BY 1),
	INFO VARCHAR(256),
	TIME_RESERVATION_ID_FK INTEGER references TIME_RESERVATION(TIME_RESERVATION_ID) ON DELETE CASCADE
);


create table "KORV".CUSTOMER
(
	CUSTOMER_ID INTEGER not null primary key
		GENERATED ALWAYS AS IDENTITY
		(START WITH 1, INCREMENT BY 1),
	EMAIL VARCHAR(100),
	PHONE_NR VARCHAR(20),
	FIRST_NAME VARCHAR(50),
	LAST_NAME VARCHAR(50),
	APPOINTMENT_ID_FK INTEGER not null references APPOINTMENT(APPOINTMENT_ID) ON DELETE CASCADE
);
